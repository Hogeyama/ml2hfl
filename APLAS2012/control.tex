\subsection{Extension for Control Operations}
\label{sec:control}
We can extend the framework to deal with control operations (e.g., exceptions and call/cc) if there
exists a translation that removes control operations.  For example,
we can remove exceptions and call/cc from a program by CPS transformation.

%Consider the following program (written in OCaml style).
\begin{example}
The following program calculates factorial and raise an exception if
\begin{alltt}
exception NotPositive
let rec fact n =
  if n <= 0 then raise NotPositive
  else
    try
      n * fact (n - 1) exn
    with NotPositive -> 1
let main n = try fact n with NotPositive -> assert (n < 0); 0
\end{alltt}
We can translate this program to an exception-free program by CPS transformation.
The following is the result of CPS transformation.
\begin{alltt}
type exc = NotPositive
let rec fact n k exn =
  if n <= 0 then exn NotPositive
  else
    let exn' e =
      match e with NotPositive -> k 1
    in fact (n - 1) (fun r -> k (n * r))) exn'
let main n k =
  let exn e = match e with
                  NotPositive -> assert (n < 0); k 0
                | _ -> assert false
  in fact n k exn
\end{alltt}
Once the exception is removed, we can apply our verification method to the
program.
\end{example}

