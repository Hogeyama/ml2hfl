
\newcommand\TODO[1]{\textcolor{red}{[TODO: {#1}]}}
\newcommand\cc[1]{\textcolor{red}{{#1}}}
\newcommand\memo[1]{\textcolor{red}{[{#1}]}}

\newcommand\widthcoefh{0.23}
\newcommand\widthcoef{0.46}
\newcommand\widthcoefw{0.96}

\chardef\us=`\_

\newcommand\LINT{\mathcal{L}_{int}}
\newcommand\LLIST{\mathcal{L}_{list}}
\newcommand\LREC{\mathcal{L}_{rec}}

\newcommand\ra{\Rightarrow}
\newcommand\red{\longrightarrow}
\newcommand\reds{\red^*}
\newcommand\Red[1]{\longrightarrow_{#1}}
\newcommand\Reds[1]{\Red{#1}^*}

\newcommand\set[1]{\{{#1}\}}
\newcommand\seq[1]{\widetilde{#1}}
\newcommand\CONSTR{C}
\newcommand\Constr[2]{\CONSTR_{#1}({#2})}
\newcommand\WILD{\_\!\_}
\newcommand\OP{\mathrm{op}}
\newcommand\Op[1]{\OP({#1})}
\newcommand\TRUE{\mathit{true}}
\newcommand\FIX{\mathbf{fix}}
\newcommand\Fix[3]{\FIX({#1},{#2},{#3})}
\newcommand\FAIL{\mathbf{fail}}
\newcommand\ASSERT{\mathbf{assert}}
\newcommand\Assert[1]{\ASSERT({#1})}
\newcommand\LIST{\mathbf{list}}
\newcommand\List[1]{{#1}\ \LIST}
\newcommand\NIL{\mathbf{nil}}
\newcommand\CONS{\mathbf{cons}}
\newcommand\Cons[2]{\CONS({#1},{#2})}
\newcommand\LEAF{\mathbf{leaf}}
\newcommand\TREE{\mathbf{tree}}
\newcommand\NODE{\mathbf{node}}
\newcommand\Node[2]{\NODE({#1},{#2})}
\newcommand\RTREE{\mathtt{rtree}}
\newcommand\RTLIST{\mathtt{rtreelist}}
\newcommand\RTNODE{\mathtt{RTNode}}
\newcommand\RTNIL{\mathtt{RTNil}}
\newcommand\RTCONS{\mathtt{RTCons}}
\newcommand\App[2]{{#1}\,{#2}}
\newcommand\IF{\mathbf{if0}}
\newcommand\THEN{\mathbf{then}}
\newcommand\ELSE{\mathbf{else}}
\newcommand\If[3]{\IF~{#1}~\THEN~{#2}~\ELSE~{#3}}
\newcommand\Pair[2]{({#1},{#2})}
\newcommand\FST{\mathbf{fst}}
\newcommand\SND{\mathbf{snd}}
\newcommand\Fst[1]{\App{\FST}{#1}}
\newcommand\Snd[1]{\App{\SND}{#1}}
\newcommand\MATCH{\mathbf{match}}
\newcommand\WITH{\mathbf{with}}
\newcommand\Match[3]{\MATCH\ {#1}\ \WITH\ \NIL \ra {#2} \mid \Cons{x_1}{x_2} \ra {#3}}
\newcommand\MatchRec[3]{\MATCH\ {#1}\ \WITH\ \Constr{1}{\widetilde{x_1}} \ra {#2} \mid \dots \mid \Constr{k}{\widetilde{x_k}} \ra {#3}}
\newcommand\Abs[2]{\lambda{#1}.\,{#2}}
\newcommand\AbsC[2]{\lambda^{C}{#1}.\,{#2}}
\newcommand\AbsN[2]{\lambda^{N}{#1}.\,{#2}}
\newcommand\AbsT[3]{\lambda{#1}\COL{#2}.\,{#3}}
\newcommand\AbsL[4]{\lambda^{#1}{#2}\COL{#3}.\,{#4}}
\newcommand\AbsTC[3]{\AbsL{C}{#1}{#2}{#3}}
\newcommand\AbsTN[3]{\AbsL{N}{#1}{#2}{#3}}
\newcommand\LET{\mathbf{let}}
\newcommand\IN{\mathbf{in}}
\newcommand\Let[3]{\LET\ {#1} = {#2}\ \IN\ {#3}}
\newcommand\UNIT{\mathbf{unit}}
\newcommand\INT{\mathbf{int}}
\newcommand\TFun[2]{{#1}\mathbin{\rightarrow}{#2}}
\newcommand\TPair[2]{{#1}\mathbin{\times}{#2}}

\newcommand\subst[2]{{#1}/{#2}}

\newcommand\FV[1]{\mathit{FV}({#1})}

\newcommand\Trans[1]{[\![{#1}]\!]}
\newcommand\TransRec[2]{[\![{#2}]\!]_{#1}}
\newcommand\Denote[1]{[\![{#1}]\!]}
\newcommand\RecConstr[5]{\mathit{Constr}({#1},{#2},{#3},{#4},{#5})}
\newcommand\RecDestr[4]{\mathit{Destr}({#1},{#2},{#3},{#4})}
\newcommand\RecDestrBase[4]{\mathit{Destr'}({#1},{#2},{#3},{#4})}

\newcommand\ExpNRec[2]{[\![{#2}]\!]_{#1}}
\newcommand\COL{\mathbin{:}}
\newcommand\p\vdash
\newcommand\Exp[3]{{#1} \p {#2} \Rightarrow {#3}}
\newcommand\CPSty[1]{[\![{#1}]\!]}
\newcommand\CPS[5]{{#1} \p {#2} \COL {#3}, {#4} \leadsto {#5}}
\newcommand\CPSprog[3]{{#1} \p {#2} \leadsto {#3}}

\newcommand\TFunL[3]{{#2}\mathbin{\rightarrow^{#1}}{#3}}
\newcommand\TFunN[2]{\TFunL{N}{#1}{#2}}
\newcommand\TFunC[2]{\TFunL{C}{#1}{#2}}
\newcommand\MApp[2]{\,{#1}\mathbin{\overline@}{#2}}
\newcommand\MAbs[2]{\overline\lambda{#1}.\,{#2}}

\newcommand\IC{C}
\newcommand\NC{N}
\newcommand\AT{\mathit{X}}

\newcommand\Abst[5]{{#1} \mid {#2} \vdash {#3} : {#4} \leadsto {#5}}
\newcommand\AbstPLDI[4]{{#1} \vdash_{\texttt{NS}} {#2} : {#3} \leadsto {#4}}
\newcommand\AbstProg[4]{{#1} \mid {#2} \vdash {#3} \leadsto {#4}}
\newcommand\Affine[2]{\mathit{Affine}{({#1}, {#2})}}
\newcommand\AffineT[3]{\mathit{Affine}{({#1}, {#2}, {#3})}}

\newcommand\Br[2]{{#1}\mathbin{\blacksquare}{#2}}

\newcommand\AbstLoc[2]{\langle{#1}\rangle_{#2}}
\newcommand\Dom[1]{\mathit{dom}(#1)}
\newcommand\call{\prec}
\newcommand\main{\mathit{main}}
\newcommand\SApp[3]{\mathit{App}^{#1}({#2},{#3})}
\newcommand\NCAdd[2]{{#1}\mathbin{\oplus}{#2}}