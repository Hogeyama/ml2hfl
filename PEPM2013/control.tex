\subsection{Extension for Control Operations}
\label{sec:control} We can extend the framework to deal with control
operations (e.g., exceptions and \texttt{call/cc}) by removing them
from a program by CPS transformation~\cite{Nielsen2001}.

%Consider the following program (written in OCaml style).
The following program calculates factorial and raises an exception if
a negative number or zero is given.
\begin{alltt}
exception NotPos
let rec fact n =
  if n <= 0 then raise NotPos
  else try n * fact (n - 1) with NotPos -> 1
let main n = try fact n with
               NotPos -> assert (n <= 0); 0
\end{alltt}
We can translate this program to an exception-free program by CPS transformation as follows:
\begin{alltt}
type exc = NotPos
let rec fact n k exn =
  if n <= 0 then exn NotPos
  else let exn' e = match e with NotPos -> k 1 in
         fact (n - 1) (fun r -> k (n * r))) exn'
let main n k =
  fact n k (fun e ->
    match e with NotPos -> assert (n <= 0); k 0)
\end{alltt}
Once the exception is removed, we can apply our verification method to the
program.

We do not treat exceptions that carrying function arguments.
A program with function-carrying exceptions might be transformed into an
untyped CPS term (more precisely, a recursively typed term).  A
higher-order model checking, however, deal only with simply typed terms.
