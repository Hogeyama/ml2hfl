#!/bin/sh
#*********************************************************************#
#                                                                     #
#                           Objective Caml                            #
#                                                                     #
#                    Pierre Weis, INRIA Rocquencourt                  #
#                                                                     #
#  Copyright 2008 Institut National de Recherche en Informatique et   #
#  en Automatique.  All rights reserved.  This file is distributed    #
#  only by permission.                                                #
#                                                                     #
#*********************************************************************#

# $Id: compile.bin,v 1.2 2008-09-13 11:15:56 weis Exp $

# A simple script to compile the Sudoku game using the optimizing compiler.

# Types.ml is just a link to types.mli
if ! (test -e types.ml); then
  ln -s types.mli types.ml;
fi

ocamlopt -inline 10000 -c types.mli
ocamlopt -inline 10000 -c types.ml
ocamlopt -inline 10000 -c utils.ml
ocamlopt -inline 10000 -c solve.ml
ocamlopt -inline 10000 -c resolve.ml
ocamlopt -inline 10000 -c read.ml
ocamlopt -inline 10000 -c main.ml
ocamlopt types.cmx utils.cmx solve.cmx resolve.cmx read.cmx main.cmx

# (*
# time a.out
#
# ***** Final result ****
#    123 456 789
#    -----------
# A  913 247 685
# B  768 591 324
# C  542 863 179
# 
# D  496 385 712
# E  187 629 543
# F  235 714 896
# 
# G  879 456 231
# H  621 938 457
# I  354 172 968
#    -----------
# 
# real    0m0.012s
# user    0m0.008s
# sys     0m0.000s
# 
# *)
