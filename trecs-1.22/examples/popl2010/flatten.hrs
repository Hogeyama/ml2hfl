/*
Input: q0

q0 nil -> .
q0 cons -> q1 q0.
q1 a -> .
q1 b -> .
q1 nil -> .
q1 cons -> q1 q0.
*/
%BEGING
S -> Flatten 0.
Flatten x -> F x nil.
F x z -> _case 2 x
  (br z (F 1 (F 0 z)))
  (br (br (cons a z) (cons b z)) (br z (F 1 (F 0 z)))).
%ENDG

/*
Output: q0
*/
%BEGINA
q0 nil -> .
q0 cons -> q1 q0.
q0 br -> q0 q0.
q1 a -> .
q1 b -> .
q1 br -> q1 q1.
%ENDA
